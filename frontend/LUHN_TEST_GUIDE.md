# AWE Electronics - Luhn算法支付测试指南

## 概述
我们的支付系统现在使用标准的Luhn算法（模10算法）来验证银行卡号的有效性。这确保了更真实的支付验证体验。

## Luhn算法验证规则

### 1. 卡号格式要求
- 卡号长度：13-19位数字
- 只包含数字字符
- 必须通过Luhn算法校验和

### 2. 支持的卡片类型
- **Visa**: 以4开头，13/16/19位
- **Mastercard**: 以51-55或22-27开头，16位
- **American Express**: 以34或37开头，15位
- **Discover**: 以6011或65开头，16位
- **JCB**: 以35开头，16位

## 测试用例

### 有效卡号（会成功）
```
4532015112830366 - Visa (16位)
4000056655665556 - Visa (16位)
5555555555554444 - Mastercard (16位)
5105105105105100 - Mastercard (16位)
378282246310005 - American Express (15位)
371449635398431 - American Express (15位)
6011111111111117 - Discover (16位)
6011000990139424 - Discover (16位)
3530111333300000 - JCB (16位)
3566002020360505 - JCB (16位)
```

### 无效卡号（会失败）
```
4532015112830367 - 未通过Luhn验证
1234567890123456 - 未通过Luhn验证
4532-0151-1283-0366 - 包含非数字字符
45320151128303 - 长度不足
45320151128303661234 - 长度过长
```

### 特殊失败条件

#### 1. 卡号末位数字规则
- 末位是0或5：模拟余额不足
- 末位是1或6：模拟银行拒绝

#### 2. CVV特殊值
- `000`: 触发支付失败
- `999`: 触发支付失败

#### 3. 持卡人姓名关键词
- 包含"fail"或"decline"：触发支付失败

#### 4. CVV长度验证
- 美国运通卡（15位）：需要4位CVV
- 其他卡片：需要3位CVV

## 测试建议

### 成功支付测试
1. 使用有效的Luhn算法卡号（如上述列表）
2. 确保卡号末位不是0、1、5、6
3. 使用正常的CVV（123、456等）
4. 持卡人姓名使用正常名称

### 失败支付测试
1. 使用无效的Luhn算法卡号
2. 使用末位为0、1、5、6的有效卡号
3. 使用特殊CVV值（000、999）
4. 持卡人姓名包含"fail"或"decline"

## 算法说明

Luhn算法步骤：
1. 从右到左遍历卡号
2. 对偶数位置的数字乘以2
3. 如果结果大于9，则减去9
4. 将所有数字相加
5. 如果总和能被10整除，则卡号有效

这确保了我们的支付系统使用真实的银行卡验证标准。 